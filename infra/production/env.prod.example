# Meme Maker - Production Environment Configuration
# Copy this file to .env.prod and update values

# ============================================================================
# DOCKER IMAGES
# ============================================================================
IMAGE_TAG=production-latest
GITHUB_REPOSITORY=owner/repo

# ============================================================================
# AWS CONFIGURATION
# ============================================================================
AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY
AWS_REGION=ap-south-1
S3_BUCKET=meme-clips-prod

# Route 53 for DNS-01 challenge (required for wildcard SSL)
ROUTE53_ZONE_ID=Z123456789ABCDEFGHIJ

# ============================================================================
# SSL/TLS CONFIGURATION
# ============================================================================
ACME_EMAIL=admin@memeit.pro

# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
ENV=production
LOG_LEVEL=INFO
WORKER_CONCURRENCY=3

# CORS Origins (production domains)
CORS_ORIGINS=https://app.memeit.pro,https://www.memeit.pro

# ============================================================================
# MONITORING & AUTHENTICATION
# ============================================================================

# Grafana Configuration
GRAFANA_ADMIN_PASSWORD=secure_admin_password_change_me

# Basic Auth for Monitoring (use bcrypt hashes)
# Generate: htpasswd -bnBC 10 username password | tr -d ':\n'
PROMETHEUS_USER=admin
PROMETHEUS_PASS_HASH=$2b$10$example_bcrypt_hash_here
PROMETHEUS_PASSWORD=fallback_plain_password

GRAFANA_USER=admin
GRAFANA_PASS_HASH=$2b$10$example_bcrypt_hash_here
GRAFANA_PASSWORD=fallback_plain_password

# ============================================================================
# PRODUCTION DEPLOYMENT
# ============================================================================
PRODUCTION_SERVER_IP=1.2.3.4
PRODUCTION_HOST=app.memeit.pro

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================

# Rate Limiting
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_BURST=10

# Session Security
SESSION_SECRET=your_secure_session_secret_here_min_32_chars

# ============================================================================
# RESOURCE LIMITS
# ============================================================================

# Redis Configuration
REDIS_MAXMEMORY=256mb
REDIS_MAXMEMORY_POLICY=allkeys-lru

# Container Resource Limits (for docker-compose)
BACKEND_MEMORY_LIMIT=1g
BACKEND_CPU_LIMIT=1.0
WORKER_MEMORY_LIMIT=2g
WORKER_CPU_LIMIT=2.0
PROMETHEUS_MEMORY_LIMIT=1g
GRAFANA_MEMORY_LIMIT=512m
CADDY_MEMORY_LIMIT=512m

# ============================================================================
# BACKUP & MONITORING
# ============================================================================

# Prometheus Data Retention
PROMETHEUS_RETENTION=720h  # 30 days

# Log Retention
CADDY_LOG_RETENTION=168h   # 7 days
CADDY_LOG_SIZE=100mb

# ============================================================================
# OPTIONAL: EXTERNAL SERVICES
# ============================================================================

# Slack Notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Email Notifications (optional)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@memeit.pro
SMTP_PASS=your_smtp_password
ALERT_EMAIL_TO=admin@memeit.pro

# ============================================================================
# DEVELOPMENT OVERRIDES (set in CI/CD)
# ============================================================================

# GitHub Actions Secrets (set in repository settings):
# - AWS_ACCESS_KEY_ID
# - AWS_SECRET_ACCESS_KEY
# - AWS_REGION
# - S3_BUCKET
# - ROUTE53_ZONE_ID
# - PRODUCTION_SERVER_IP
# - PRODUCTION_HOST
# - PRODUCTION_USER
# - PRODUCTION_SSH_KEY
# - GRAFANA_ADMIN_PASSWORD
# - PROMETHEUS_PASS_HASH
# - GRAFANA_PASS_HASH 